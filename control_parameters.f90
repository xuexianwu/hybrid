!======================================================================!
module control_parameters
!----------------------------------------------------------------------!
! Definition of control parameters.
!----------------------------------------------------------------------!
implicit none
save
!----------------------------------------------------------------------!
LOGICAL :: sing        ! True if run for just one site             (log)
LOGICAL :: daily       ! Direct input of daily climate?            (log)
LOGICAL :: sclim       ! Single-site climate input file            (log)
LOGICAL :: isi         ! isi-mip run?                              (log)
character*3 :: rcp     ! RCP to use for CO2 mixing ratio          (strg)
character*5 :: sub_ouf ! Sub-directory for output files           (strg)
character*5 :: sub_rsf ! Sub-directory for restart files          (strg)
logical :: chkclm      ! Run full check on climate input?          (log)
logical :: ooaf        ! OOAF simulation?                          (log)
logical :: restart     ! Restart from restart file?                (log)
logical :: physiol     ! Full canopy physiology?                   (log)
!----------------------------------------------------------------------!
integer :: i0,j0 ! Indices for global arrays (n)
!----------------------------------------------------------------------!
! No. vegetation (plant) types.
!  1 = bright bare soil (in combination with 10)
!  2 (1) = tundra
!  3 (2) = grassland
!  4 (3) = shrub/grassland
!  5 (4) = tree/grassland
!  6 (5) = deciduous forest
!  7 (6) = evergreen forest
!  8 (7) = rainforest
!  9 (8) = cultivation
! 10 = dark bare soil (in combination with 1)
!----------------------------------------------------------------------!
integer, parameter :: nveg   = 10
integer, parameter :: nplant =  8
!----------------------------------------------------------------------!
! Canopy layer depth (LAI units)
!----------------------------------------------------------------------!
real*8, parameter :: laid  = 0.5
!----------------------------------------------------------------------!
! Photosynthetic pathway is C3? (log)
!----------------------------------------------------------------------!
logical :: c3
!----------------------------------------------------------------------!
! Number of carbon pools (n).
!  1 labile
!  2 structure
!  3 litter
!  4 SOM
!----------------------------------------------------------------------!
integer, parameter :: ncpools = 4
!----------------------------------------------------------------------!
! Count for canopy layer (n).
!----------------------------------------------------------------------!
integer :: layer
!----------------------------------------------------------------------!
! No. canopy layers (n).
!----------------------------------------------------------------------!
integer :: n_layers
!----------------------------------------------------------------------!
! Execute surface nisurf times every hour.
!----------------------------------------------------------------------!
integer, parameter :: nisurf = 2
!----------------------------------------------------------------------!
! To hold date for filenames.
!----------------------------------------------------------------------!
character*7 :: adate
character*3 :: amon (12) = (/'jan','feb','mar','apr','may','jun', &
&                            'jul','aug','sep','oct','nov','dec'/)
!----------------------------------------------------------------------!
! Time step for ground hydrology (s).
!----------------------------------------------------------------------!
real*8 :: dt
!----------------------------------------------------------------------!
integer :: im ! Longitudinal number of grid boxes                    (n)
integer :: jm ! Latitudinal number of grid boxes                     (n)
!----------------------------------------------------------------------!
integer :: olon ! Longitude index for detailed diagnostics           (n)
integer :: olat ! Latitude index for detailed diagnostics            (n)
!----------------------------------------------------------------------!
! Number of surfaces types for each grid-box                         (n)
! 1 is bare soil
! 2 is vegetated
!----------------------------------------------------------------------!
integer, parameter :: nsurf_max = 2
!----------------------------------------------------------------------!
! Maximum number of soil layers                                      (n)
!----------------------------------------------------------------------!
integer, parameter :: nsoil_layers_max = 6
!----------------------------------------------------------------------!
! Maximum number of snow layers (n)
!----------------------------------------------------------------------!
integer, parameter :: nsnow_layers_max = 3
!----------------------------------------------------------------------!
! Maximum number of canopy layers (n)
!----------------------------------------------------------------------!
integer, parameter :: ncanopy_layers_max = 100
!----------------------------------------------------------------------!
! Number of soil textures (cannot change yet)                        (n)
!----------------------------------------------------------------------!
integer, parameter :: ntextures = 5
!----------------------------------------------------------------------!
! Used to calculate maximum dimension of thm array.
!----------------------------------------------------------------------!
integer, parameter :: nexp = 6
!----------------------------------------------------------------------!
! Maximum iterations to solve geometric function for thm table       (n)
!----------------------------------------------------------------------!
integer, parameter :: mmax = 100
!----------------------------------------------------------------------!
! Maximum number of iterations in advnc (n).
!----------------------------------------------------------------------!
integer, parameter :: limit = 300
!----------------------------------------------------------------------!
! Accuracy limit for single precision calculations.
!----------------------------------------------------------------------!
real*8, parameter :: eps_sing = 1.0e-12
!----------------------------------------------------------------------!
! Maximum dimension of thm                                           (n)
!----------------------------------------------------------------------!
integer :: nth
!----------------------------------------------------------------------!
! Maximum iterations to find hl in hydro (n)
!----------------------------------------------------------------------!
integer :: jcm
!----------------------------------------------------------------------!
! Local control parameters.
!----------------------------------------------------------------------!
integer :: ibv         ! Surface type (bare or vegetated)            (n)
integer :: nsoil_layer ! Layer index                                 (n)
integer :: lsn         ! Snow layer count                            (n)
integer :: kveg        ! Vegetation count                            (n)
integer :: kplant      ! Plant count                                 (n)
integer :: nit ! Loop count (n)
real*8 :: dts ! Timestep (s)
!----------------------------------------------------------------------!
! Source time step (s) = 1 ITU.
!----------------------------------------------------------------------!
real*8 :: dtsrc
!----------------------------------------------------------------------!
! Number of internal time units per day (1 ITU = dtsrc sec).
! Relates calendar time to internal time itime.
!----------------------------------------------------------------------!
integer :: nday
!----------------------------------------------------------------------!
! Year 1 of internal clock (itime = 1 to 365 * nday).
! Relates calendar time to internal time itime.
!----------------------------------------------------------------------!
integer :: iyear1
!----------------------------------------------------------------------!
! Start hour of model run (hr).
!----------------------------------------------------------------------!
integer :: houri
!----------------------------------------------------------------------!
! Start date of model run (day).
!----------------------------------------------------------------------!
integer :: datei
!----------------------------------------------------------------------!
! Start month of model run (month).
!----------------------------------------------------------------------!
integer :: monthi
!----------------------------------------------------------------------!
! Start year of model run (yr).
!----------------------------------------------------------------------!
integer :: yeari
!----------------------------------------------------------------------!
! Start of run in hours.
!----------------------------------------------------------------------!
integer :: ihri
!----------------------------------------------------------------------!
! End of run in hours.
!----------------------------------------------------------------------!
integer :: ihoure
!----------------------------------------------------------------------!
! Time at start of run.
!----------------------------------------------------------------------!
integer :: itimei
!----------------------------------------------------------------------!
! Time at end of run.
!----------------------------------------------------------------------!
integer :: itimee
!----------------------------------------------------------------------!
! Length of run (hours).
!----------------------------------------------------------------------!
integer :: ite1
!----------------------------------------------------------------------!
! Current time in ITUs (1 ITU = dtsrc sec, currently 1 hour).
!----------------------------------------------------------------------!
integer :: itime
!----------------------------------------------------------------------!
! Current year (yr).
!----------------------------------------------------------------------!
integer :: jyear
!----------------------------------------------------------------------!
! Current month (yr).
!----------------------------------------------------------------------!
integer :: jmon
!----------------------------------------------------------------------!
! Current Julian day (day).
!----------------------------------------------------------------------!
integer :: jday
!----------------------------------------------------------------------!
! Timepoint within day (n).
!----------------------------------------------------------------------!
integer :: dtpoint
!----------------------------------------------------------------------!
end module control_parameters
!======================================================================!
